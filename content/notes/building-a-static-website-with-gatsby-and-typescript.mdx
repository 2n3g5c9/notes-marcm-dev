---
title: Building a static website with Gatsby and TypeScript
summary: The concepts and technical decisions made on this static website, as a non-Front-End Engineer. From requirements to implementation details.
category: Web / Frontend
date: 2021-02-21
---

import { BlockWarning } from '@components'

<BlockWarning>
  <strong>Disclaimer:</strong> This website was built from the ground up as a hobby to maintain, or at best develop
  my understanding. Feel free to contact me if you want to share some advice.
</BlockWarning>

# Context

## Motivation

* Keep up with [React](https://reactjs.org/)/[TypeScript](https://www.typescriptlang.org/) core concepts, and modern
front-end web development workflows.
* Maintain basic knowledge of web design, without the overhead of writing layers of wrapper components.
* Experiment with a web analytics tool, and understand derived insights.

## Requirements

* High performance ([Core Web Vitals](https://web.dev/vitals/)) on all pages, wherever the reader is: across the
globe... or in the Tube.
* Free hosting: no server-side logic and low traffic expected.
* High security standards (X.509 certificate, HTTP Security Headers,
[CSP](https://developers.google.com/web/fundamentals/security/csp), etc.), because everyone should care.
* Acceptable level of accessibility ([aXe benchmark](https://www.deque.com/axe/)), to include all readers regardless
of disabilities.
* Automated dependency updates (not recommended in production), to minimise my time in JavaScript dependency hell.
* Headless CMS integration is not an immediate requirement, but could be at some point.

# High-Level Design

## Development

**Static Site Generator:**
* Integrates with React/TypeScript for modularity and aforementioned rationale.
* Adheres to [Jamstack](https://jamstack.org/) architecture principles (JavaScript, APIs & Markup) and renders
[MDX](https://mdxjs.com/) (Markdown with embedded JSX).
* Bootstraps SEO, bundling, building and service worker ([PWA](https://developers.google.com/web/ilt/pwa))
configurations, as well as many optimisation techniques (code splitting, image processing and serving
([WebP](https://developers.google.com/speed/webp) and/or [AVIF](https://aomedia.org/av1-features/get-started/)),
preload/prefetch, tree shaking, etc.).

**CSS Framework:**
* Bootstraps building blocks for standards-compliant web design elements.
* Reduces the amount of written CSS code, while ensuring a degree of overall coherence in the web design.
* Offers ability to write CSS-in-JS to embed conditional styling in components, and reduces the risk of unintended
cascading style.

## Operations

![High-level design](./images/marcm-dev-hld.png)

**Version Control System (VCS):**
* Organises, stores and versions the code.
* Decouples and reconciles development workflows with "production" code.
* Unlocks automation and Ops-oriented workflows with SaaS integrations.

**Continuous Integration (CI):**
* Triggered on push/merge to all branches, gives enough confidence the code is in a stable state to be deployed.
* Lint checks: detects structural problems and improves code quality with static code analysis.
* Type checks: detects type mismatches with static code analysis.
* Snapshot tests: detects unexpected changes in UI components rendering.
* Accessibility tests: detects drift with basic aXe accessibility compliance checks.

**Continuous Deployment (CD):**
* Often offered by the CDN service, by passing an NPM script command.
* Triggered by a push/merge on the production branch.

**Dependency Management:**
* Periodically looks for JavaScript package updates.
* Triggers the CI pipeline and auto-merges to the production branch if all tests pass.

**Global Content Delivery Nework (CDN):**
* Serves cached static assets from globally distributed PoPs, providing both high availability and performance.
* Handles asset compression ([GZIP](https://www.gnu.org/software/gzip/) and [Brotli](https://github.com/google/brotli)).
* Manages TLS for free (via [Let's Encrypt](https://letsencrypt.org/)): HTTP/2, TLS 1.2 & 1.3 only, PFS.

# Tech Stack

There is no silver bullet, and the tech stack doesn't matter as much as the high-level design ; as long as you stick
with it long enough to understand it.

## Static Site Generator

Among the considered options are: Gatsby, Next.js and Eleventy (11ty).

![Static Site Generator](./images/static-site-generator.png)